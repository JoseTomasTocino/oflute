;;; Fichero de configuración de Emacs de Antonio Garcia Dominguez
;;; Emacs en general
 ; Visualización de números de columna
 (setq column-number-mode t)
 ; Indentado por espacios, no por tabuladores
 (setq indent-tabs-mode nil)
 ; Retira la pantalla de inicio
 (setq inhibit-startup-screen t)
 ; Destaca los paréntesis correspondientes
 (setq show-paren-mode t)
 ; Marca en rojo el espaciado a final de línea
 (setq show-trailing-whitespace t)
 ; Sincroniza el kill ring de Emacs con el búfer de selección de X
 (setq x-select-enable-clipboard t)

;;; AucTeX
; Hace que siempre se pregunte por el documento principal
(setq-default TeX-master nil)
; Por defecto, generaremos PDF
(add-hook 'TeX-mode-hook 'tex-pdf-mode)
; Activa el autoguardado
(setq TeX-auto-save t)

;;; Flyspell
 ; Utiliza el diccionario castellano para comprobar código LaTeX por defecto
 (setq flyspell-default-dictionary "castellano8")
 ; Desactiva la comprobación de ortografía dentro de fórmulas matemáticas
 (setq flyspell-check-tex-math-command nil)
; Activa Flyspell en todos los búferes de LaTeX
(add-hook 'TeX-mode-hook 'flyspell-mode)

; Carga whizzytex, un previsualizador útil en ciertos casos
(autoload 'whizzytex-mode
  "whizzytex"
  "WhizzyTeX, a minor-mode WYSIWIG environment for LaTeX" t)

;; RefTeX: para manejar referencias
(setq reftex-plug-into-AUCTeX t)
(add-hook 'TeX-mode-hook 'reftex-mode)

;; Inserción automática de $, ], ) y } al pulsar la tecla
;; correspondiente
(defun set-key-balanced (tecla izq der)
  (interactive)
  (local-set-key tecla
                 `(lambda ()
                    (interactive)
                    (insert-balanced ,izq ,der))))

(defun insert-balanced (izq der)
  (interactive)
  (insert izq)
  (save-excursion
    (insert der)))

(add-hook 'TeX-mode-hook '(lambda ()
                            (set-key-balanced "$" ?\$ ?\$)
                            (set-key-balanced "[" ?\[ ?\])
                            (set-key-balanced "(" ?\( ?\))
                            (set-key-balanced "{" ?\{ ?\})))

(custom-set-variables
'(TeX-newline-function (quote newline-and-indent)))
(custom-set-faces
)

(setq default-fill-column 70)
(add-hook 'text-mode-hook 'turn-on-auto-fill)

